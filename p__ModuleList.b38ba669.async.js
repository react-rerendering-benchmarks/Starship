"use strict";(self.webpackChunktricorder_api_server_ui=self.webpackChunktricorder_api_server_ui||[]).push([[13],{52060:function(B,y,a){a.r(y);var D=a(97983),l=a.n(D),b=a(40794),p=a.n(b),O=a(12741),L=a.n(O),j=a(98037),A=a(59652),I=a(67294),o=a(91993),c=a(16536),W=a(76469),g=a(68563),v=a(94601),R=a(36275),s=a(85893),M=function P(f){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"horizontal";return Array.isArray(f)?(0,s.jsx)(o.Z,{layout:E,children:f.map(function(u){return Array.isArray(u)?P(u,"inline"):(0,s.jsx)(o.Z.Item,{label:u.label,children:u.value},u.value)})}):f},x=function(){var f=(0,I.useState)(),E=L()(f,2),u=E[0],C=E[1],d=(0,R.useIntl)(),h=function(){var m=p()(l()().mark(function n(){var i;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.NQ)();case 3:return i=e.sent,C(i.data),e.abrupt("return",i.data);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},n,null,[[0,8]])}));return function(){return m.apply(this,arguments)}}(),T=[{title:d.formatMessage({id:"codeList.name"}),dataIndex:"Name",render:function(n){return n}},{title:d.formatMessage({id:"codeList.status"}),dataIndex:"Status",render:function(n){return n===0?d.formatMessage({id:"codeList.status.undeploy"}):n===1?d.formatMessage({id:"codeList.status.success"}):n===2?d.formatMessage({id:"codeList.status.pending"}):n===3?d.formatMessage({id:"codeList.status.fail"}):"--"}},{title:d.formatMessage({id:"codeList.create_time"}),dataIndex:"CreateTime"},{title:d.formatMessage({id:"codeList.action"}),dataIndex:"",key:"x",render:function(n,i){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("a",{onClick:p()(l()().mark(function t(){var e;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,v.eu)({Id:i.Id||i.ID});case 2:e=r.sent,e.code==="200"?(c.ZP.success("deploy success"),h()):c.ZP.error("deploy fail"+e.message);case 4:case"end":return r.stop()}},t)})),children:d.formatMessage({id:"codeList.action.deploy"})}),(0,s.jsx)("a",{onClick:p()(l()().mark(function t(){var e;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,v.nj)({Id:i.Id||i.ID});case 2:e=r.sent,e.code==="200"?(c.ZP.success("undeploy success"),h()):c.ZP.error("undeploy fail,"+e.message);case 4:case"end":return r.stop()}},t)})),style:{marginLeft:10},children:d.formatMessage({id:"codeList.action.undeploy"})}),(0,s.jsx)(W.Z,{placement:"bottom",title:"Are you sure to delete ?",onConfirm:p()(l()().mark(function t(){var e;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,v.TS)({Id:i.Id||i.ID});case 2:e=r.sent,e.code==="200"?(c.ZP.success("delete success"),h()):c.ZP.error("delete fail, "+e.message);case 4:case"end":return r.stop()}},t)})),okText:"Yes",cancelText:"No",children:(0,s.jsx)("a",{style:{marginLeft:10},children:d.formatMessage({id:"codeList.action.delete"})})})]})}}];return(0,I.useEffect)(function(){h()},[]),(0,s.jsx)(j._z,{children:(0,s.jsx)(A.Z,{style:{borderRadius:8},bodyStyle:{backgroundImage:"radial-gradient(circle at 97% 10%, #EBF2FF 0%, #F5F8FF 28%, #EBF1FF 124%)"},children:(0,s.jsx)(g.Z,{columns:T,expandable:{expandedRowRender:function(n){return(0,s.jsx)(g.Z,{style:{padding:"30px 20px 30px 0"},showHeader:!1,columns:[{title:"id",dataIndex:"ID"},{title:"name",dataIndex:"Name"},{title:"Ebpf",dataIndex:"Ebpf",render:function(t){var e;if(!t||t==="Ebpf")return t;var _=JSON.parse(t||"{}");return(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(o.Z.Item,{label:"code",children:_.code}),(0,s.jsx)(o.Z.Item,{label:"eventSize",children:_.eventSize}),(0,s.jsx)(o.Z.Item,{label:"perfBuffers",children:M((e=_.kprobes)===null||e===void 0?void 0:e.map(function(r){return[{label:"target",value:r.target},{label:"entry",value:r.entry},{label:"return",value:r.return}]}))})]})}},{title:"SchemaAttr",dataIndex:"SchemaAttr",render:function(t){if(!t||t==="SchemaAttr")return t;var e=JSON.parse(t||"[]");return M(e==null?void 0:e.map(function(_){return{label:_.name,value:_.type}}))}},{title:"WasmFileName",dataIndex:"WasmFileName"}],dataSource:[{ID:"ID",Name:"name",Ebpf:"Ebpf",SchemaAttr:"SchemaAttr",WasmFileName:"WasmFileName"},n],bordered:!0})}},rowKey:function(n){return n.ID},dataSource:u})})})};y.default=x}}]);
